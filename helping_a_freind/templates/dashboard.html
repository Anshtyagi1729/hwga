{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h2"><i class="fas fa-chart-pie me-2"></i>Analytics Dashboard</h1>
    <a href="{{ url_for('dashboard') }}" class="btn btn-primary">
        <i class="fas fa-sync-alt me-1"></i> Refresh Visualizations
    </a>
</div>

<div class="row mb-4">
    <div class="col-12">
        <div class="card shadow-sm border-0">
            <div class="card-header bg-white border-bottom-0">
                <h5 class="card-title text-primary fw-bold mb-0">Executive Summary Report</h5>
            </div>
            <div class="card-body text-center bg-light">
                <img src="{{ url_for('static', filename='images/summary_report.png') }}" 
                     class="img-fluid rounded shadow-sm" 
                     alt="Summary Report"
                     onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'alert alert-warning\'>Summary report not found. Please run analysis first.</div>'">
            </div>
        </div>
    </div>
</div>

<div class="row mb-4 g-4">
    <div class="col-md-6">
        <div class="card h-100 shadow-sm border-0">
            <div class="card-header bg-transparent">
                <h5 class="card-title mb-0">Sentiment Distribution</h5>
            </div>
            <div class="card-body text-center">
                <img src="{{ url_for('static', filename='images/sentiment_distribution.png') }}" 
                     class="img-fluid" 
                     alt="Sentiment Distribution"
                     onerror="this.src='https://via.placeholder.com/600x400?text=No+Data+Available'">
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card h-100 shadow-sm border-0">
            <div class="card-header bg-transparent">
                <h5 class="card-title mb-0">Source Analysis</h5>
            </div>
            <div class="card-body text-center">
                <img src="{{ url_for('static', filename='images/sentiment_by_source.png') }}" 
                     class="img-fluid" 
                     alt="Sentiment by Source"
                     onerror="this.src='https://via.placeholder.com/600x400?text=No+Data+Available'">
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-12">
        <div class="card shadow-sm border-0">
            <div class="card-header bg-transparent d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">Interactive Sentiment Timeline</h5>
                <small class="text-muted">Generated by Plotly</small>
            </div>
            <div class="card-body p-0">
                <div class="ratio ratio-21x9" style="min-height: 500px;">
                    <iframe src="{{ url_for('static', filename='images/sentiment_timeline.html') }}" 
                            style="border:0;" 
                            allowfullscreen>
                    </iframe>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}